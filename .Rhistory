library(devtools)
load_all()
"https://statfin.stat.fi/PXWeb/api/v1/fi/StatFin/tyonv/statfin_tyonv_pxt_12r5.px"
"https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__tyonv/statfin_tyonv_pxt_12r5.px/"
"https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__tyonv/statfin_tyonv_pxt_12r5.px/" -> url
#' Get table code from url
#'
#' @param url A url
#'
#' @return
#' @export
#'
#' @examples
get_table_code <- function(url){
sapply(url,
function(x) {paste(stringr::str_match(x, "statfin_\\s*(.*?)\\s*pxt_\\s*(.*?)\\s*.px")[,2:3], collapse = "")},
USE.NAMES = FALSE)
}
get_table_code(url)
install()
install()
test()
document()
rm(list = ls())
document()
install()
devtools::install()
devtools::install()
library(devtools)
load_all()
load_all()
pxweb_print_full_query("https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/")
library(statfitools)
statfi_url("https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/")
"https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/" |> statfi_url() |> pxweb_print_full_query()
"https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/" |> statfi_parse_url() |> pxweb_print_full_query()
"https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/" |> statfi_parse_url() |> pxweb_print_code_full_query()
"https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/" |> statfi_parse_url() |> pxweb_full_query_as_list()
url <- "https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/"
url <- statfi_parse_url(url)
meta <- pxweb::pxweb_get(url)
meta
codes <- sapply(meta$variables, "[[", "code")
codes
query_list <- as.list(rep("*", times = length(codes)))
query_list
names(query_list) <- codes
query_list
pxq <- pxweb::pxweb_query(query_list)
pxq
full_query <- pxweb:::pxweb_add_metadata_to_query(pxq, meta)
full_query
full_query |> pxweb:::pxweb_query_as_rcode()
load_all()
get_full_query("https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/")
load_all()
get_full_query("https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/")
args(gsub)
load_all()
get_full_query("https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__rpk/statfin_rpk_pxt_11yy.px/")
help(pxweb:::pxweb_query_as_rcode)
args(pxweb:::pxweb_query_as_rcode)
load_all()
document()
install()
load_all()
